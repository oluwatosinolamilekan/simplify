stages:
  - test

test:
  image: node:latest
  stage: test
  script:
    # install dependencies
    - npm install cypress
    - npm ci 
    - $(npm bin)/print-env CI
    # start the server in the background
    - npm run start:ci &
    # run Cypress tests
    - npx cypress run